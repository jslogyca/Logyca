<?xml version="1.0" encoding="utf-8"?>
<odoo noupdate="1">
        <!-- Email template para resumen de ausencias -->
        <record id="email_template_leave_summary" model="mail.template">
            <field name="name">Resumen de Ausencias Aprobadas</field>
            <field name="model_id" ref="hr.model_hr_employee"/>
            <field name="subject">Resumen de tus Ausencias Aprobadas (${ctx.get('date_from')} - ${ctx.get('date_to')})</field>
            <field name="email_from">${(object.company_id.email or '')|safe}</field>
            <field name="email_to">${object.work_email|safe}</field>
            <field name="body_html" type="html">
<div style="font-family: Arial, sans-serif; max-width: 700px; margin: 0 auto; padding: 20px; background-color: #f5f5f5;">
    <div style="background-color: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        
        <!-- Header -->
        <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #2c3e50; margin-bottom: 10px;">ğŸ“Š Resumen de Ausencias</h1>
            <p style="color: #7f8c8d; font-size: 14px;">Periodo: ${ctx.get('date_from')} - ${ctx.get('date_to')}</p>
        </div>
        
        <!-- InformaciÃ³n del Empleado -->
        <div style="background-color: #ecf0f1; padding: 20px; border-radius: 5px; margin-bottom: 25px;">
            <h3 style="color: #34495e; margin-top: 0;">Empleado</h3>
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 5px 0; color: #7f8c8d; font-weight: bold;">Nombre:</td>
                    <td style="padding: 5px 0; color: #2c3e50;">${object.name}</td>
                </tr>
                <tr>
                    <td style="padding: 5px 0; color: #7f8c8d; font-weight: bold;">IdentificaciÃ³n:</td>
                    <td style="padding: 5px 0; color: #2c3e50;">${object.identification_id or 'N/A'}</td>
                </tr>
                % if object.department_id:
                <tr>
                    <td style="padding: 5px 0; color: #7f8c8d; font-weight: bold;">Departamento:</td>
                    <td style="padding: 5px 0; color: #2c3e50;">${object.department_id.name}</td>
                </tr>
                % endif
                % if object.job_id:
                <tr>
                    <td style="padding: 5px 0; color: #7f8c8d; font-weight: bold;">Puesto:</td>
                    <td style="padding: 5px 0; color: #2c3e50;">${object.job_id.name}</td>
                </tr>
                % endif
            </table>
        </div>

        <!-- Resumen Total -->
        <div style="background-color: #3498db; color: white; padding: 15px; border-radius: 5px; text-align: center; margin-bottom: 25px;">
            <h2 style="margin: 0; font-size: 24px;">Total de Ausencias Aprobadas</h2>
            <p style="font-size: 36px; font-weight: bold; margin: 10px 0;">${len(ctx.get('leaves'))}</p>
        </div>

        <!-- Lista de Ausencias -->
        <h3 style="color: #34495e; border-bottom: 2px solid #3498db; padding-bottom: 10px;">Detalle de Ausencias</h3>
        
        % for leave in ctx.get('leaves'):
        <div style="border: 1px solid #dfe6e9; border-radius: 5px; padding: 15px; margin-bottom: 15px; background-color: #f8f9fa;">
            <div style="display: flex; justify-content: space-between; align-items: start;">
                <div style="flex: 1;">
                    <h4 style="color: #2980b9; margin-top: 0; margin-bottom: 10px;">
                        ${leave.holiday_status_id.name}
                    </h4>
                    <table style="width: 100%; font-size: 14px;">
                        <tr>
                            <td style="padding: 3px 0; color: #7f8c8d; width: 120px;">ğŸ“… Desde:</td>
                            <td style="padding: 3px 0; color: #2c3e50; font-weight: bold;">
                                ${leave.request_date_from.strftime('%d/%m/%Y')}
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 3px 0; color: #7f8c8d;">ğŸ“… Hasta:</td>
                            <td style="padding: 3px 0; color: #2c3e50; font-weight: bold;">
                                ${leave.request_date_to.strftime('%d/%m/%Y')}
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 3px 0; color: #7f8c8d;">â±ï¸ DuraciÃ³n:</td>
                            <td style="padding: 3px 0; color: #2c3e50;">
                                ${leave.number_of_days} dÃ­a(s)
                            </td>
                        </tr>
                        % if leave.name and leave.name != leave.holiday_status_id.name:
                        <tr>
                            <td style="padding: 3px 0; color: #7f8c8d; vertical-align: top;">ğŸ“ Motivo:</td>
                            <td style="padding: 3px 0; color: #2c3e50;">
                                ${leave.name}
                            </td>
                        </tr>
                        % endif
                    </table>
                </div>
                <div style="margin-left: 15px;">
                    <span style="background-color: #27ae60; color: white; padding: 5px 10px; border-radius: 3px; font-size: 12px; font-weight: bold;">
                        âœ“ APROBADA
                    </span>
                </div>
            </div>
        </div>
        % endfor

        <!-- Footer -->
        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #ecf0f1; text-align: center;">
            <p style="font-size: 12px; color: #95a5a6; margin: 5px 0;">
                Este es un resumen automÃ¡tico generado desde el sistema de gestiÃ³n de ausencias.
            </p>
            <p style="font-size: 12px; color: #95a5a6; margin: 5px 0;">
                Si tienes alguna duda, contacta con tu departamento de Recursos Humanos.
            </p>
        </div>
    </div>
</div>
            </field>
            <field name="auto_delete" eval="True"/>
        </record>
</odoo>
